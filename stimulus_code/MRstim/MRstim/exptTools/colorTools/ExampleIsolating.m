% script% % AUTHOR: BW% DATE:  09.11.98% PURPOSE:% %   This is an example of how to calculate cone contrasts using%   the new function ConeRGB and the utility%   findMaxConeScale. This code could be inserted into exptTools%   and stimulus creation software.%  % BUGS:%  % Load the display% % whatSin('NecLcd2000Spectra')% load([machineName, ':Applications:MATLAB 5.2:MRI:GammaTables:NecLcd2000Spectra']);display.spectra = monitorSpectra(:,1:3);% plot(wavelength,monitorSpectra)% Calculations for the control/normals% disp('Using Stockman/Sharpe Fundamentals')load stockmansensors = stockman;%  Set up the stimulus and background structures.%  clear stimLMS backRGBstimLMS.dir = [0 1 0]';backRGB.dir = [1 1 1]';backRGB.scale = .5;%  If you already know that the scale levels you want to use are%  in range.  But, for illustration, we first find the max cone%  scale factor for the display and these conditions[stimLMS stimRGB] = findMaxConeScale(display, stimLMS, backRGB, sensors);%  This is the largest value you can use for this direction%  stimLMS.maxScale%  You might set the contrast values this way%  stimLMS.scale = stimLMS.maxScale*[.5 .4 .2 .1];%  It is possible to start right here if you already know%  stimLMS.maxScale and how this level relates to contrast.%  Just select some scale values for the LMS direction and%  compute the rgb scale factors needed to obtain these.%  stimLMS.scale = stimLMS.maxScale*[1 .5 .25 .1];stimRGB = cone2RGB(display, stimLMS, backRGB, sensors);%  These are the stim RGB propertiesstimRGB.dirstimRGB.maxScalestimRGB.scale%  Now, you can see what cone contrasts you will have when using%  these variables.[lmsContrast lmsBack]= RGB2ConeContrast(display,stimRGB,backRGB, sensors);%  Here are the cone contrasts for this color direction.%  lmsContrast%  Here are what you started out with.  Notice that the largest of%  the cone contrasts has these values, but not the others.%  stimLMS.scale%  Here is the cone background, just for kicks.%  lmsBack